<!DOCTYPE html>
<html lang="en">
	<head>

		<!-- Meta, title, CSS, favicons, etc. -->
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Bootstrap, a sleek, intuitive, and powerful mobile first front-end framework for faster and easier web development.">
		<meta name="keywords" content="HTML, CSS, JS, JavaScript, framework, bootstrap, front-end, frontend, web development">
		<meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">

		<title>piPlayer &middot; V0.3</title>

		
	
		<!-- Bootstrap core CSS -->
		<link href="../../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
		<link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/sunburst.min.css" rel="stylesheet">
		<link href="../css/style.css" rel="stylesheet">
		<style type="text/css">
			pre {display:block;overflow-x:auto;padding:0.5em;background:#000;color:#f8f8f8;-webkit-text-size-adjust:none}
			table {padding: 0;}
			table tr {border-top: 1px solid #cccccc;background-color: white;margin: 0;padding: 0;}
			table tr:nth-child(2n) {background-color: #f8f8f8;}
			table tr th {font-weight: bold;border: 1px solid #cccccc;text-align: left;margin: 0;padding: 6px 13px;}
			table tr td {border: 1px solid #cccccc;text-align: left;margin: 0;padding: 6px 13px;}
			table tr th :first-child, table tr td :first-child {margin-top: 0;}
			table tr th :last-child, table tr td :last-child {margin-bottom: 0;}
		</style>
		
	<script src="../../bower_components/ace-builds/src-min/ace.js" type="text/javascript" charset="utf-8"></script>
	<style type="text/css" media="screen">
	    #editor {
	    	margin-top: 1em;
	        border-radius: 4px 4px 0;
	        border: 1px solid #ddd;
	        height: 80vh;
	        font-size: 14px;
	    }

		/* IE8 only */
		@media \0screen {
		    #editor {height:80px;}
		}

		@-webkit-keyframes fadeIn {
		  0% {opacity: 0;}
		  20% {opacity: 1;}
		  80% {opacity: 1;}
		  100% {opacity: 0;}
		}

		@keyframes fadeIn {
		  0% {opacity: 0;}
		  20% {opacity: 1;}
		  80% {opacity: 1;}
		  100% {opacity: 0;}
		}

		.fadeIn {
		  	-webkit-animation-name: fadeIn;
		    animation-name: fadeIn;
		    animation-duration: 6s;
			opacity:0;
		}
	</style>


		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

		<!-- Favicons -->
		<link rel="apple-touch-icon" href="../apple-touch-icon.png">
		<link rel="icon" href="../favicon.ico">

	</head>

	<body>
		<a id="skippy" class="sr-only sr-only-focusable" href="#content"><div class="container"><span class="skiplink-text">Skip to main content</span></div></a>

		<!-- Docs master nav -->
		<header class="navbar navbar-static-top bs-docs-nav" id="top" role="banner">
			<div class="container">
				<div class="navbar-header">
					<button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a href="../../" class="navbar-brand">Project Implicit</a>
				</div>
				<nav class="collapse navbar-collapse bs-navbar-collapse">
					<ul class="nav navbar-nav">
						<li>
							<a href="/PIquest/">piQuest</a>
						</li>
						<li>
							<a href="/PIquest/">piManager</a>
						</li>
						<li class="active">
							<a href="javascript:void(0);">piPlayer</a>
						</li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li><a href="#">Github</a></li>
					</ul>
				</nav>
			</div>
		</header>

		<div id="content" class="bs-docs-header">
			<div class="container">
				
	<h1>Evaluative_priming2</h1>
	
		<p>You can play around with evaluative_priming2.js right here. All you need to do is change the script and then click the activate button.</p>
	


			</div>
		</div>

		<div class="container bs-docs-container">
			<div class="row">
				<div class="col-md-9" role="main">
					
		<p>
			<button class="btn btn-default btn-lg btn-block" onclick="window.click(event)" type="button">Activate</button>
		</p>

		<div id="success" role="alert" class="alert alert-success" style="display:none">
			<strong>Well Done!</strong> The task has been successfully completed.
		</div>
		<div id="error" role="alert" class="alert alert-danger" style="display:none">
			<strong>Oh Snap!</strong> Something went wrong with the task. Why don't you fix it and try again?
		</div>

   		<div id="editor">
define(['pipAPI','pipScorer'], function(APIConstructor,Scorer) {

	var API = new APIConstructor();
	var scorer = new Scorer();
	var category1 = 'Pleasant';
	var category2 = 'Unpleasant';

	//Set the size of the screen
	API.addSettings('canvas',{
		maxWidth: 1000,
		proportions : 0.8,
		//Change the colors to allow better presentation of the colored stimuli.
		background: 'white',
		canvasBackground: 'green',
		borderWidth: 5,
		borderColor: 'black'
	});

	API.addSettings('base_url',{
		image : '../../images'
	});


	API.addSettings('logger',{
		url : '/implicit/PiPlayerApplet',
		pulse : 20,

		// use default logger (as copied from documents.txt but replace the regular latency with the computed latency)
		logger: function(trialData, inputData, actionData, logStack){

			var stimList = this._stimulus_collection.get_stimlist();
			var mediaList = this._stimulus_collection.get_medialist();

			var myLatency = inputData.latency;
			if (trialData.begin > 0) {
				myLatency = inputData.latency - trialData.begin;
			}

			return {
				log_serial : logStack.length,
				trial_id: this._id,
				name: this.name(),
				responseHandle: inputData.handle,
				latency: myLatency, // computed latency
				absoluteLatency : inputData.latency, // original latency
				stimuli: stimList,
				media: mediaList,
				data: trialData
			};
		}
	});
	//the scorer that compute the user feedback
	scorer.addSettings('compute',{
		ErrorVar:'score',
		condVar:"condition",
		cond1VarValues: ["Old black People / Unpleasant"], //condition 1
		cond2VarValues: ["Old black People / Pleasant"], //condition 2
		parcelVar : "parcel",
		parcelValue : ['first'],
		fastRT : 150, //Below this reaction time, the latency is considered extremely fast.
		maxFastTrialsRate : 0.1, //Above this % of extremely fast responses within a condition, the participant is considered too fast.
		minRT : 150, //Below this latency
		maxRT : 5000, //above this
		errorLatency : {use:"false", penalty:600, useForSTD:true}//ignore error respones
	});

	scorer.addSettings('message',{
		MessageDef: [
			{ cut:'-0.2', message:'Your data suggest an Automatic negative attitude toward old black people' },//D < -0.2
			{ cut:'0.2', message:'Your data suggest Neutral automatic attitude toward old black people' },// -0.2 <= D <= 0.2
			{ cut:'5', message:'Your data suggest an Automatic positive attitude toward old black people' }// D > 0.2 (and D<=2)
		]

	});

	//Define the basic trial (the prsentation of the images and words)
	API.addTrialSets({
	basicTrial: [{
		data : {error:0},// by default each trial is crrect, this is modified in case of an error
		//Layout defines what will be presented in the trial. It is like a background display.
		layout: [
			{location:{left:15,top:3},media:{word:'key: e'}, css:{color:'black','font-size':'1em'}},
			{location:{right:15,top:3},media:{word:'key: i'},  css:{color:'black','font-size':'1em'}},
			{location:{left:10,top:6},media:{word:category2}, css:{color:'white','font-size':'2em'}},
			{location:{right:10,top:6},media:{word:category1},  css:{color:'white','font-size':'2em'}}
		],
		input: [
			{handle:'enter',on:'enter'} //'enter' to skip the current block
		],
		//Set what to do.
		interactions: [
		{
			conditions: [{type:'begin'}],
			actions: [
				{type:'showStim',handle:'primingImage'},// display the first stimulus
				{type:'setInput',input:{handle:'primeOut',on:'timeout',duration:300}}
			]
		},
		// show target stim
		{
			conditions: [{type:'inputEquals',value:'primeOut'}], // on time out
			actions: [
				{type:'hideStim',handle:'primingImage'}, // hide the first stimulus
				{type:'showStim',handle:'targetStim'}, // and show the second one
				//Set the possible key inputs.
				{type:'setInput',input:{handle:category2,on: 'keypressed', key:'e'}},
				{type:'setInput',input:{handle:category1,on: 'keypressed', key:'i'}},
				{type:'setInput',input:{handle:category2,on:'leftTouch',touch:true}},
				{type:'setInput',input:{handle:category1,on:'rightTouch',touch:true}},
				{type:'setInput',input:{handle:'targetOut',on:'timeout',duration:1500}}
			]
		},
		// on time out
		{
			conditions: [{type:'inputEquals',value:'targetOut'}],
			actions: [
				{type:'removeInput',handle	:[category2,category1]},//only one respnse is possible
				{type:'hideStim',handle:'targetStim'}, // hide the stimulus
				{type:'showStim',handle:'warning'}, // and show the warning
				{type:'setInput',input:{handle:'showFix', on:'timeout',duration:250}} //End the trial in 250ms (show the warning until then)
			]
		},
		// there are 2 possible responses: "pleasant" and "unpleasant", here we handle these responses when the user answers
		// matches the word value (correct response)
		{
			conditions: [{type:'inputEqualsStim',property:'wordCategory'}],
			actions: [
				{type:'log'}, // here we call the log action. This is because we want to record the latency of this input (the latency of the response)
				{type:'removeInput',handle	:[category2,category1,'targetOut']}, //only one response is possible
				{type:'trigger', handle:'showFix'}//End the trial immidiatlly after correct response
			]
		},
				// there are 2 possible responses: "pleasant" and "unpleasant", here we handle with these responses when the user answer
				// doesn't match the word value (incorrect response)
				//this conditions are true only after incorrect response
				// handle incorrect response.
				//this conditions are true only after incorrect response
		{
			conditions: [
				{type:'inputEqualsStim',property:'wordCategory', negate:true},
				{type:'inputEquals',value: [category1, category2]}
			], // This is a category action - as opposed to some timeout.
			actions: [
				{type:'setTrialAttr', setter:{score:1}},
				{type:'log'}, // here we call the log action. This is because we want to record the latency of this input (the latency of the response)
				{type:'showStim',handle:'errorFB'}, //show error feedback
				{type:'removeInput',handle:[category2,category1,'targetOut']},// block the option to change the answer or to answer twice
				{type:'setInput',input:{handle:'showFix', on:'timeout',duration:250}} //End the trial in 250ms (show the x until then)
			]
		},
		{
			conditions: [{type:'inputEquals',value:'showFix'}], //What to do when endTrial is called.
			actions: [
				{type:'hideStim',handle:'All'},
				{type:'showStim',handle:'blankScreen'}, //show blankScreen
				{type:'setInput',input:{handle:'endTrial', on:'timeout',duration:{min:300, max: 900}}} // randomly pick from within a range
			]
		},
		// skip block -> if you press 'enter' you will skip the current block.
		{
			conditions: [{type:'inputEquals',value:'enter'}],
			actions: [
				{type:'goto', destination: 'nextWhere', properties: {blockStart:true}},
				{type:'endTrial'}
				]
		},
		{
			conditions: [{type:'inputEquals',value:'endTrial'}], //What to do when endTrial is called.
			actions: [{type:'endTrial'}]
		}
			] // end interactions
		}] // end basic trial
	}); // end trialsets

	API.addTrialSets({
		pleasantOldWhite:[{		//pleasant+white old people (condition 1)
			data: {parcel:'second', condition: "Old white People / Pleasant"},
			inherit:{set: 'basicTrial'},
			stimuli: [
				{ inherit: {set: 'targetStimulusA', type:'exRandom'}, data : {handle:'targetStim'} },
				{ inherit: {set: 'primingImage3', type:'exRandom'}, data : {handle:'primingImage'} },
				{ inherit: 'errorFB'},
				{ inherit: 'warning'},
				{ inherit: 'blanckScreen'}
			]
		}],
		pleasantOldBlack:[{		//pleasant+black old people (condition 2)
			data: {parcel:'first',condition: "Old black People / Pleasant"},
			inherit:{set: 'basicTrial'},
			stimuli: [
				{ inherit: {set: 'targetStimulusA', type:'exRandom'}, data : {handle:'targetStim'} },
				{ inherit: {set: 'primingImage1', type:'exRandom'}, data : {handle:'primingImage'} },
				{ inherit: 'errorFB'},
				{ inherit: 'warning'},
				{ inherit: 'blanckScreen'}
			]
		}],
		pleasantYoungWhite:[{		//pleasant+white young people (condition 3)
			data: {parcel:'fourth',condition: "Young white People / Pleasant"},
			inherit:{set: 'basicTrial'},
			stimuli: [
				{ inherit: {set: 'targetStimulusA', type:'exRandom'}, data : {handle:'targetStim'} },
				{ inherit: {set: 'primingImage4', type:'exRandom'}, data : {handle:'primingImage'} },
				{ inherit: 'errorFB'},
				{ inherit: 'warning'},
				{ inherit: 'blanckScreen'}
			]
		}],
		pleasantYoungBlack:[{		//pleasant+black young people (condition 4)
			data: {parcel:'third',condition: "Young black People / Pleasant"},
			inherit:{set: 'basicTrial'},
			stimuli: [
				{ inherit: {set: 'targetStimulusA', type:'exRandom'}, data : {handle:'targetStim'} },
				{ inherit: {set: 'primingImage2', type:'exRandom'}, data : {handle:'primingImage'} },
				{ inherit: 'errorFB'},
				{ inherit: 'warning'},
				{ inherit: 'blanckScreen'}
			]
		}],


		unpleasantOldWhite:[{		//unpleasant+white old people (condition 1)
			data: {parcel:'second',condition: "Old white People / Unpleasant"},
			inherit:{set: 'basicTrial'},
			stimuli: [
			{ inherit: {set: 'targetStimulusB', type:'exRandom'}, data : {handle:'targetStim'} },
			{ inherit: {set: 'primingImage3', type:'exRandom'}, data : {handle:'primingImage'} },
			{ inherit: 'errorFB'},
			{ inherit: 'warning'},
			{ inherit: 'blanckScreen'}
			]
		}],
		unpleasantOldBlack:[{		//unpleasant+ black old people (condition 2)
			data: {parcel:'first',condition: "Old black People / Unpleasant"},
			inherit:{set: 'basicTrial'},
			stimuli: [
			{ inherit: {set: 'targetStimulusB', type:'exRandom'}, data : {handle:'targetStim'} },
			{ inherit: {set: 'primingImage1', type:'exRandom'}, data : {handle:'primingImage'} },
			{ inherit: 'errorFB'},
			{ inherit: 'warning'},
			{ inherit: 'blanckScreen'}
			]
		}],
		unpleasantYoungWhite:[{		//unpleasant+white young people (condition 3)
			data: {parcel:'fourth',condition: "Young white People / Unpleasant"},
			inherit:{set: 'basicTrial'},
			stimuli: [
			{ inherit: {set: 'targetStimulusB', type:'exRandom'}, data : {handle:'targetStim'} },
			{ inherit: {set: 'primingImage4', type:'exRandom'}, data : {handle:'primingImage'} },
			{ inherit: 'errorFB'},
			{ inherit: 'warning'},
			{ inherit: 'blanckScreen'}
			]
		}],
		unpleasantYoungBlack:[{		//unpleasant+ black young people (condition 4)
			data: {parcel:'third',condition: "Young black People / Unpleasant"},
			inherit:{set: 'basicTrial'},
			stimuli: [
			{ inherit: {set: 'targetStimulusB', type:'exRandom'}, data : {handle:'targetStim'} },
			{ inherit: {set: 'primingImage2', type:'exRandom'}, data : {handle:'primingImage'} },
			{ inherit: 'errorFB'},
			{ inherit: 'warning'},
			{ inherit: 'blanckScreen'}
			]
		}]
	});

//Create the stimuli
	API.addStimulusSets({

	// This Default stimulus is inherited by the other stimuli so that we can have a consistent look and change it from one place
		Default: [
			{css:{color:'white','font-size':'2em'}}
		],

	//first catagory of words
		targetStimulusA: [
			{
				data : {wordCategory:category1, alias:category1},
				inherit:'Default',
				media: {inherit:{type:'exRandom',set:'targetWordsA'}} //Select a word from the media, randomly
			}
			],
		//the second catagory of words
		targetStimulusB: [
			{
				data : {wordCategory:category2, alias:category2},
				inherit:'Default',
				media: {inherit:{type:'exRandom',set:'targetWordsB'}}
			}

		],
		//Error feedback stimulus
		errorFB : [
			{
				data : {handle:'errorFB'},
				size: {height:15,width:15},
				location: {top:70},
				media: {image:'cross.png'} //An image.
			}
		],


		//blanckScreen  stimulus (in between the trials) can be used as a fixation point
		blanckScreen : [
			{
				data : {handle:'blanckScreen'},
				css:{color:'green','font-size':'2em'},
				media: {word:' '}//can be replace with '+'
			}
		],
		//warning "Response Faster!"
		warning : [
			{
				data : {handle:'warning'},
				css:{color:'red','font-size':'3em'},
				media: {word:'Response Faster!'}
			}
		],
		//priming stimulus: the 4 catagories of images
			primingImage1 : [
			{

				data : {handle:'primingImage',alias:'oldBlack'},
				inherit:'Default',
				media: {inherit:{type:'exRandom',set:'Images1'}}
			}
			],
			primingImage2 : [
			{
				data : {handle:'primingImage',alias:'youngBlack'},
				inherit:'Default',
				media: {inherit:{type:'exRandom',set:'Images2'}}
			}
			],
			primingImage3 : [
			{

				data : {handle:'primingImage',alias:'oldWhite'},
				inherit:'Default',
				media: {inherit:{type:'exRandom',set:'Images3'}}
			}
			],
			primingImage4 : [
			{

				data : {handle:'primingImage',alias:'youngWhite'},
				inherit:'Default',
				media: {inherit:{type:'exRandom',set:'Images4'}}
			}
			]

	});
	//Create materials (media) for the stimulus
	//four categories of images, and two categories of words.
	API.addMediaSets({
		Images1: [
			{image: 'ybblackold1.jpg'},
			{image: 'ybblackold2.jpg'},
			{image: 'ybblackold3.jpg'},
			{image: 'ybblackold4.jpg'},
			{image: 'ybblackold5.jpg'},
			{image: 'ybblackold6.jpg'},
			{image: 'ybblackold7.jpg'},
			{image: 'ybblackold8.jpg'},
			{image: 'ybblackold9.jpg'},
			{image: 'ybblackold10.jpg'},
			{image: 'ybblackold11.jpg'},
			{image: 'ybblackold12.jpg'}
		]
	});
	API.addMediaSets({
		Images2: [
			{image: 'ybblackyng1.jpg'},
			{image: 'ybblackyng2.jpg'},
			{image: 'ybblackyng3.jpg'},
			{image: 'ybblackyng4.jpg'},
			{image: 'ybblackyng5.jpg'},
			{image: 'ybblackyng6.jpg'},
			{image: 'ybblackyng7.jpg'},
			{image: 'ybblackyng8.jpg'},
			{image: 'ybblackyng9.jpg'},
			{image: 'ybblackyng10.jpg'},
			{image: 'ybblackyng11.jpg'},
			{image: 'ybblackyng12.jpg'}
		]
	});
	API.addMediaSets({
		Images3: [
			{image: 'ybwhiteold1.jpg'},
			{image: 'ybwhiteold2.jpg'},
			{image: 'ybwhiteold3.jpg'},
			{image: 'ybwhiteold4.jpg'},
			{image: 'ybwhiteold5.jpg'},
			{image: 'ybwhiteold6.jpg'},
			{image: 'ybwhiteold7.jpg'},
			{image: 'ybwhiteold8.jpg'},
			{image: 'ybwhiteold9.jpg'},
			{image: 'ybwhiteold10.jpg'},
			{image: 'ybwhiteold11.jpg'},
			{image: 'ybwhiteold12.jpg'}
		]
	});
	API.addMediaSets({
		Images4: [
			{image: 'ybwhiteyng1.jpg'},
			{image: 'ybwhiteyng2.jpg'},
			{image: 'ybwhiteyng3.jpg'},
			{image: 'ybwhiteyng4.jpg'},
			{image: 'ybwhiteyng5.jpg'},
			{image: 'ybwhiteyng6.jpg'},
			{image: 'ybwhiteyng7.jpg'},
			{image: 'ybwhiteyng8.jpg'},
			{image: 'ybwhiteyng9.jpg'},
			{image: 'ybwhiteyng10.jpg'},
			{image: 'ybwhiteyng11.jpg'},
			{image: 'ybwhiteyng12.jpg'}
		]
	});
	API.addMediaSets({
		targetWordsA: [
			{word: ' Nice'},
			{word: 'Friendly'},
			{word: 'Considerate'},
			{word: 'Gentle'},
			{word: 'Gracious'},
			{word: 'Sympathetic'},
			{word: 'Generous'},
			{word: 'Warm'},
			{word: 'Kind'},
			{word: 'Cheerful'},
			{word: 'Beautiful'},
			{word: 'Attractive'},
			{word: 'Likeable'},
			{word: 'Wonderful'}
		]
	});

	API.addMediaSets({
		targetWordsB: [
			{word: 'Nasty'},
			{word: 'Ugly'},
			{word: 'Stupid'},
			{word: 'Evil'},
			{word: 'Dirty'},
			{word: 'Awful'},
			{word: 'Offensive'},
			{word: 'Dirty'},
			{word: 'Annoying'},
			{word: 'Vicious'},
			{word: 'Rude'},
			{word: 'Irritating'},
			{word: 'Disgusting'},
			{word: 'Cruel'}
		]
	});
	//Define the instructions trial
	API.addTrialSets('inst',{
			input: [
				{handle:'space',on:'space'}, //Will handle a SPACEBAR reponse
				{handle: 'enter', on:'enter'},
				{handle:'space',on:'centerTouch',touch:true}//support touch
			],
			interactions: [
				{ // begin trial
					conditions: [{type:'begin'}],
					actions: [{type:'showStim',handle:'All'}] //Show the instructions
				},
				{
					conditions: [{type:'inputEquals',value:'space'}], //What to do when space is pressed
					actions: [
						{type:'hideStim',handle:'All'}, //Hide the instructions
						{type:'setInput',input:{handle:'endTrial', on:'timeout',duration:500}} //In 500ms: end the trial. In the mean time, we get a blank screen.
					]
				},
					// skip block -> if you press 'enter' you will skip the current block.
				{
					conditions: [{type:'inputEquals',value:'enter'}],
					actions: [
						{type:'goto', destination: 'nextWhere', properties: {blockStart:true}},
						{type:'endTrial'}
					]
				},
				{
					conditions: [{type:'inputEquals',value:'endTrial'}], //What to do when endTrial is called.
					actions: [
						{type:'endTrial'} //End the trial
					]
				}
			]
	});

	//Defines the sequence of trials next
	API.addSequence([
		{ //Instructions trial
			data: {blockStart:true},
			inherit : "inst",
			stimuli: [
				{//The instructions stimulus
					data : {'handle':'instStim'},
					//the instructions that will be shown on the screen
					media:{html:'<div><p style="font-size:24px"><color="FFFAFA">Put your middle or index fingers on the <b>E</b> key of the keyboard, and the <b>I</b> key as well. <br/> Words and photos will appear one after another. Ignore the photos and categorize the words as pleasant or unpleasant.<br/><br/>When the word belongs to the catagory "Unpleasant", press the <b>E</b> key. ; when the word belongs to the category "Pleasant", press the <b>I</b> key.</br></br>If you make an error, an X will appear.</br>This is a timed sorting task. <b>GO AS FAST AS YOU CAN</b> while making as few mistakes as possible.<br>This task will take about 5 minutes to complete.<br> press on "space" to begin <br><br>[Round 1 of 3]</p></div>'}
				}
			]
		},
		{ //The presentation trials
			// Repeat 64 times the trial. (8 times each comination)
			mixer: 'random',		//
			data : [{
				mixer: 'repeat',
				times: 8,
				data : [
					{inherit: 'pleasantOldWhite',data:{block:0}},
					{inherit: 'pleasantYoungWhite',data:{block:0}},
					{inherit: 'pleasantOldBlack',data:{block:0}},
					{inherit: 'pleasantYoungBlack',data:{block:0}},
					{inherit: 'unpleasantOldWhite',data:{block:0}},
					{inherit: 'unpleasantYoungWhite',data:{block:0}},
					{inherit: 'unpleasantOldBlack',data:{block:0}},
					{inherit: 'unpleasantYoungBlack',data:{block:0}}
				]
				} // end wrapper
			]
		},
		{ //Instructions trial, second round
			data: {blockStart:true},
			inherit : "inst",
			stimuli: [
				{//The instructions stimulus
					data : {'handle':'instStim'},
					media:{html:'<div><p style="font-size:28px"><color="#FFFAFA">Press "space" to continue with the same task.<br/><br/>Please try to challenge yourself to be as fast as you can without making mistakes<br/><br/>[Round 2 of 3].</p></div>'}
				}
			]
		},
		{ //The presentation trials
			// Repeat 64 times the trial. (8 times each comination)
			mixer: 'random',		//
			data : [{
				mixer: 'repeat',
				times: 8,
				data : [
						{inherit: 'pleasantOldWhite',data:{block:1}},
					{inherit: 'pleasantYoungWhite',data:{block:1}},
					{inherit: 'pleasantOldBlack',data:{block:1}},
					{inherit: 'pleasantYoungBlack',data:{block:1}},
					{inherit: 'unpleasantOldWhite',data:{block:1}},
					{inherit: 'unpleasantYoungWhite',data:{block:1}},
					{inherit: 'unpleasantOldBlack',data:{block:1}},
					{inherit: 'unpleasantYoungBlack',data:{block:1}}
				]
				} // end wrapper
			]
		},

		{ //Instructions trial, third round
			data: {blockStart:true},
			inherit : "inst",
			stimuli: [
				{//The instructions stimulus
					data : {'handle':'instStim'},
					media:{html:'<div><p style="font-size:28px"><color="#FFFAFA">Press "space" for the last round.<br/><br/>[Round 3 of 3].</p></div>'}
				}
			]
		},
		{ //The presentation trials
			// Repeat 64 times the trial. (8 times each comination)
			mixer: 'random',		//
			data : [{
				mixer: 'repeat',
				times: 8,
				data : [
					{inherit: 'pleasantOldWhite',data:{block:2}},
					{inherit: 'pleasantYoungWhite',data:{block:2}},
					{inherit: 'pleasantOldBlack',data:{block:2}},
					{inherit: 'pleasantYoungBlack',data:{block:2}},
					{inherit: 'unpleasantOldWhite',data:{block:2}},
					{inherit: 'unpleasantYoungWhite',data:{block:2}},
					{inherit: 'unpleasantOldBlack',data:{block:2}},
					{inherit: 'unpleasantYoungBlack',data:{block:2}}
				]
				} // end wrapper
			]
		},
		// user feedback- here we will use the computeD function.
		{
			data: {blockStart:true},
			inherit: "inst",
			stimuli: [],
			customize: function(){
				/* global console */
				var trial = this;
				var DScoreObj;
				console.log('calling scorer');
				DScoreObj = scorer.computeD();
				var media1 = DScoreObj.FBMsg+' The Score is: '+DScoreObj.DScore;
				scorer.postToServer(DScoreObj.DScore,DScoreObj.FBMsg,"score1","feedback1");

				//////second call to score//////
				scorer.addSettings('compute',{
					parcelValue : ['second'],
					cond1VarValues: ["Old white People / Unpleasant"], //condition 1
					cond2VarValues: ["Old white People / Pleasant"] //condition 2

				});
				scorer.addSettings('message',{
					MessageDef: [
						{ cut:'-0.2', message:'Your data suggest an Automatic negative attitude toward old white people' },//D < -0.2
						{ cut:'0.2', message:'Your data suggest Neutral automatic attitude toward old white people' },// -0.2 <= D <= 0.2
						{ cut:'5', message:'Your data suggest an Automatic positive attitude toward old white people' }// D > 0.2 (and D<=2)
					]
				});
				console.log('calling scorer for the second time');
				DScoreObj = scorer.computeD();
				var media2 = DScoreObj.FBMsg+' The Score is: '+DScoreObj.DScore;
				scorer.postToServer(DScoreObj.DScore,DScoreObj.FBMsg,"score2","feedback2");

				//////third call to score//////
				scorer.addSettings('compute',{
					parcelValue : ['third'],
					cond1VarValues: ["Young black People / Unpleasant"], //condition 1
					cond2VarValues: ["Young black People / Pleasant"] //condition 2

				});
				scorer.addSettings('message',{
					MessageDef: [
						{ cut:'-0.2', message:'Your data suggest an Automatic negative attitude young black people' },//D < -0.2
						{ cut:'0.2', message:'Your data suggest Neutral automatic attitude toward young black people' },// -0.2 <= D <= 0.2
						{ cut:'5', message:'Your data suggest an Automatic positive attitude toward young black people' }// D > 0.2 (and D<=2)
					]
				});
				console.log('calling scorer for the third time');
				DScoreObj = scorer.computeD();
				var media3 = DScoreObj.FBMsg+' The Score is: '+DScoreObj.DScore;
				scorer.postToServer(DScoreObj.DScore,DScoreObj.FBMsg,"score3","feedback3");

				//////fourth call to score//////
				scorer.addSettings('compute',{
					parcelValue : ['fourth'],
					cond1VarValues: ["Young white People / Unpleasant"], //condition 1
					cond2VarValues: ["Young white People / Pleasant"] //condition 2

				});
				scorer.addSettings('message',{
					MessageDef: [
						{ cut:'-0.2', message:'Your data suggest an Automatic negative attitude young white people' },//D < -0.2
						{ cut:'0.2', message:'Your data suggest Neutral automatic attitude toward young white people' },// -0.2 <= D <= 0.2
						{ cut:'5', message:'Your data suggest an Automatic positive attitude toward young white people' }// D > 0.2 (and D<=2)
					]
				});
				console.log('calling scorer for the fourth time');
				DScoreObj = scorer.computeD();
				var media = {css:{color:'black'},media:{html:'<h1><div><p style="font-size:24px"><color="#FFFAFA"> '+media1+ '<br/>'+media2+ '<br/>'+media3+ '<br/>'+DScoreObj.FBMsg+' The Score is:'+DScoreObj.DScore+'</p></div>'}};
				trial.stimuli.push(media);
				scorer.postToServer(DScoreObj.DScore,DScoreObj.FBMsg,"score4","feedback4");

			}
		},
		{ //Instructions trial, the end of the task, instruction what to do next
			data: {blockStart:true},
			inherit : "inst",
			stimuli: [
				{//The instructions stimulus
					data : {'handle':'instStim'},
					media:{html:'<div><p style="font-size:28px"><color="#FFFAFA">You have completed the study<br/><br/>Thank you very much for your participation.<br/><br/> Press "space" for continue to next task.</p></div>'}
				}
			]
		}
	]);

	return API.script;
});
		</div>

		<script>
		    var editor = ace.edit("editor");
		    editor.setTheme("ace/theme/monokai");
		    editor.getSession().setMode("ace/mode/javascript");
		    editor.setOption("showPrintMargin", false);
		    var win;
		    var feedbackId = 'success';

		    function click(event){
		    	event.target.blur();

		    	// assume the feedback is success
				feedbackId = 'success';

				// clean out open window
		    	if (win){
		    		win.close();
		    		win = null;
		    	}

		    	win = window.open('../static/playquest.html', 'questionnaire');

		    	win.onload = function(){
		    		// first set the unload listener
					win.addEventListener('unload', function(event) {
						var el = document.getElementById(feedbackId);
						window.focus();
						fade(el);
					});

					// then activate the player (this ensures that when )
					win.piActivate(editor.getValue());
		    	};
		    }

	    	window.addEventListener('error', function(e){
	    		console.error(e);
	    		feedbackId = 'error';
	    	});

	    	function fade(el){
				el.style.display = 'block';
				el.classList.add('fadeIn');
				setTimeout(function(){
					el.style.display = 'none';
					el.classList.remove('fadeIn');
				}, 6000);
	    	}

		</script>

				</div>

				<div class="col-md-3" role="complementary">
					<nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm">

						

						

						<ul class="nav bs-docs-sidenav">

							
							<li class="">
								<a href="../tutorials/overview.html">Overview</a>
							</li>
						
							
							<li class="">
								<a href="../tutorials/install.html">Install</a>
							</li>
						
							
							<li class="">
								<a href="../tutorials/javascript.html">Javascript</a>
							</li>
						
							
							<li class="">
								<a href="../tutorials/hello.html">Hello World</a>
							</li>
						
							
							<li class="">
								<a href="../tutorials/slideshow.html">Slide show</a>
							</li>
						
							<li>
								<a href="javascript:void(0)">Stroop</a>
								<ul class="nav">
									
							<li class="">
								<div>
									<a href="../tutorials/stroop-setupDocco.html">Setup</a>
									<a href="../tutorials/stroop-setup.js" download="../tutorials/stroop-setup.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../tutorials/stroop-setupPlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class="">
								<div>
									<a href="../tutorials/stroop-interactionsDocco.html">Interactions</a>
									<a href="../tutorials/stroop-interactions.js" download="../tutorials/stroop-interactions.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../tutorials/stroop-interactionsPlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class="">
								<div>
									<a href="../tutorials/stroop-inheritanceDocco.html">inheritance</a>
									<a href="../tutorials/stroop-inheritance.js" download="../tutorials/stroop-inheritance.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../tutorials/stroop-inheritancePlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class="">
								<div>
									<a href="../tutorials/stroop-blockDocco.html">Blocks</a>
									<a href="../tutorials/stroop-block.js" download="../tutorials/stroop-block.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../tutorials/stroop-blockPlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class="">
								<div>
									<a href="../tutorials/stroop-taskDocco.html">Task</a>
									<a href="../tutorials/stroop-task.js" download="../tutorials/stroop-task.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../tutorials/stroop-taskPlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
								</ul>
							</li>
							<li>
								<a href="../examples/README.html">Examples</a>
								<ul class="nav">
									
							<li class="">
								<div>
									<a href="../examples/iatDocco.html">IAT</a>
									<a href="../examples/iat.js" download="../examples/iat.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../examples/iatPlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class="">
								<div>
									<a href="../examples/ampDocco.html">AMP</a>
									<a href="../examples/amp.js" download="../examples/amp.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../examples/ampPlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class="">
								<div>
									<a href="../examples/biatDocco.html">BIAT</a>
									<a href="../examples/biat.js" download="../examples/biat.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../examples/biatPlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class="">
								<div>
									<a href="../examples/gnatDocco.html">GNAT</a>
									<a href="../examples/gnat.js" download="../examples/gnat.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../examples/gnatPlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class="">
								<div>
									<a href="../examples/spfDocco.html">SPF</a>
									<a href="../examples/spf.js" download="../examples/spf.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../examples/spfPlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class="">
								<div>
									<a href="../examples/st-iatDocco.html">ST-IAT</a>
									<a href="../examples/st-iat.js" download="../examples/st-iat.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../examples/st-iatPlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class="">
								<div>
									<a href="../examples/evaluative_primingDocco.html">Evaluative priming</a>
									<a href="../examples/evaluative_priming.js" download="../examples/evaluative_priming.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../examples/evaluative_primingPlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class=" active ">
								<div>
									<a href="../examples/evaluative_priming2Docco.html">Evaluative priming 2</a>
									<a href="../examples/evaluative_priming2.js" download="../examples/evaluative_priming2.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../examples/evaluative_priming2Play.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
								</ul>
							</li>
							<li>
								<a href="../snippets/README.html">Snippets</a>
								<ul class="nav">
									
							<li class="">
								<div>
									<a href="../snippets/inheritanceDocco.html">Inheritance</a>
									<a href="../snippets/inheritance.js" download="../snippets/inheritance.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../snippets/inheritancePlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class="">
								<div>
									<a href="../snippets/inputDocco.html">Input</a>
									<a href="../snippets/input.js" download="../snippets/input.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../snippets/inputPlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class="">
								<div>
									<a href="../snippets/interactionsDocco.html">Interactions</a>
									<a href="../snippets/interactions.js" download="../snippets/interactions.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../snippets/interactionsPlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class="">
								<div>
									<a href="../snippets/sequenceDocco.html">Sequence</a>
									<a href="../snippets/sequence.js" download="../snippets/sequence.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../snippets/sequencePlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class="">
								<div>
									<a href="../snippets/settingsDocco.html">Settings</a>
									<a href="../snippets/settings.js" download="../snippets/settings.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../snippets/settingsPlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class="">
								<div>
									<a href="../snippets/stimulusDocco.html">Stimulus</a>
									<a href="../snippets/stimulus.js" download="../snippets/stimulus.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../snippets/stimulusPlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class="">
								<div>
									<a href="../snippets/touchDocco.html">Touch</a>
									<a href="../snippets/touch.js" download="../snippets/touch.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../snippets/touchPlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
									
							<li class="">
								<div>
									<a href="../snippets/trialDocco.html">Trial</a>
									<a href="../snippets/trial.js" download="../snippets/trial.js" title="Download"><span class="glyphicon glyphicon-download"></span></a>
									<a href="../snippets/trialPlay.html" title="Play"><span class="glyphicon glyphicon-play-circle"></span></a>
								</div>
							</li>
						
								</ul>
							</li>
							
							<li class="">
								<a href="API.html">API</a>
							</li>
						
							
							<li class="">
								<a href="playgroundPlay.html">Playground</a>
							</li>
						
						</ul>
						<!-- <a class="back-to-top" href="#top">
							Back to top
						</a> -->
					</nav>
				</div>
			</div>
		</div>

		<!-- Footer
		================================================== -->
		<footer class="bs-docs-footer" role="contentinfo">
			<div class="container">
				<p>Created by Project Implicit for the benefit of all.</p>
				<!-- <p>Code licensed under <a href="https://github.com/twbs/bootstrap/blob/master/LICENSE" target="_blank">MIT</a>, documentation under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p> -->
				<ul class="bs-docs-footer-links text-muted">
					<li>Currently v0.0.27</li>
					<li>&middot;</li>
					<li><a href="https://github.com/ProjectImplicit/PIquest">GitHub</a></li>
					<li>&middot;</li>
					<li><a href="https://github.com/ProjectImplicit/PIquest/releases">Releases</a></li>
				</ul>
			</div>
		</footer>

	</body>
</html>