define(["jquery","./trial/trial_sets","./stimulus/stimulus_sets","./media/media_sets"],function(e,t,n,r){var i=function(t){return typeof t.customize=="function"&&(t.customize.apply(t,[t]),t.customize=null),t},s=function(o,u){var a,f,l,c;switch(u){case"trial":a=t();break;case"stimulus":a=n();break;case"media":a=r();break;default:throw new Error("Unknown set type "+u)}if(!o.inherit)return i(o),o;f=e.isPlainObject(o.inherit)?o.inherit:{set:o.inherit};if(!a[f.set])throw new Error("Unknown "+u+"Set: "+f.set);return l=s(a[f.set].inherit(f),u),c=e.extend(!0,{},o),e.each(l,function(t,n){c[t]||(e.isArray(l[t])?c[t]=e.extend(!0,[],n):typeof l[t]=="object"?c[t]=e.extend(!0,{},n):c[t]=n)}),l.data&&(c.data=e.extend(!0,{},l.data,c.data)),i(c),c};return s});