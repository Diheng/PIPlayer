define(["jquery","backbone","app/task/main_view"],function(e,t,n){var r=n.$el,i=t.View.extend({initialize:function(){this.$el.addClass("stimulus").attr("data-handle",this.model.handle).css("visibility","hidden").css(this.model.get("css")).appendTo(r),this.render()},render:function(){return this.size(),this.place(),this},show:function(){return this.options.type==="image"&&this.options.image.indexOf("gif")!==-1?(window.ActiveXObject||"ActiveXObject"in window?(this.$el.css("visibility","visible"),this.$el[0].src=this.options.image+"#"+Math.random()):(this.$el[0].src=this.options.image,this.$el.css("visibility","visible")),this):(this.$el.css("visibility","visible"),this)},hide:function(){return this.$el.css("visibility","hidden"),this},size:function(){var e=this.model.get("size");return e.font_size&&this.$el.css("font-size",e.font_size),e.height!="auto"&&this.options.type!="word"&&this.$el.height(e.height+"%"),e.width!="auto"&&this.$el.width(e.width+"%"),this},place:function(){function e(e){return{height:e.outerHeight(),width:e.outerWidth()}}var t,n,i,s,o=e(r),u=e(this.$el),a=this.model.get("location")||{};typeof a.top=="undefined"&&typeof a.bottom=="undefined"&&(a.top="center"),typeof a.left=="undefined"&&typeof a.right=="undefined"&&(a.right="center");switch(a.top){case undefined:case"auto":t="auto";break;case"center":t=(o.height-u.height)/2;break;default:t=o.height*a.top/100}switch(a.bottom){case undefined:case"auto":n="auto";break;case"center":n=(o.height-u.height)/2;break;default:n=o.height*a.bottom/100}switch(a.left){case undefined:case"auto":i="auto";break;case"center":i=(o.width-u.width)/2;break;default:i=o.width*a.left/100}switch(a.right){case undefined:case"auto":s="auto";break;case"center":s=(o.width-u.width)/2;break;default:s=o.width*a.right/100}this.$el.css({top:t,bottom:n,left:i,right:s})}});return i});