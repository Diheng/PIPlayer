define(["underscore","../data/properties","../data/categories","./IATlayout"],function(e,t,n,r){function i(){var e={data:{block:"generic"},input:[{handle:"space",on:"space"}],interactions:[{conditions:[{type:"begin"}],actions:[{type:"showStim",handle:"All"}]},{conditions:[{type:"inputEquals",value:"space"}],actions:[{type:"hideStim",handle:"All"},{type:"setInput",input:{handle:"endTrial",on:"timeout",duration:t.post_instructions_interval||0}}]},{conditions:[{type:"inputEquals",value:"endTrial"}],actions:[{type:"endTrial"}]},{conditions:[{type:"inputEquals",value:"skip1"}],actions:[{type:"setInput",input:{handle:"skip2",on:"enter"}}]},{conditions:[{type:"inputEquals",value:"skip2"}],actions:[{type:"goto",destination:"nextWhere",properties:{blockStart:!0}},{type:"endTrial"}]}]};return t.DEBUG&&e.input.push({handle:"skip1",on:"keypressed",key:27}),t.notouch||e.input.push({handle:"space",on:"bottomTouch",touch:!0}),e}function u(){var u=i(),a=[u],f,l,c,h=function(){this.layout=r(this.data.part)};for(var p=1;p<=7;p++)c=o[p]||{},f={data:{block:p},inherit:{set:"instructions",type:"byData",data:{block:"generic"}},customize:h},l={inherit:"instructions",media:{template:"inst"+p+".jst"}},c.media&&(l.media=c.media),c.template&&(l.media={inlineTemplate:c.template}),c.css&&(l.css=c.css),c.extend&&e.extend(f,c.extend),f.stimuli=[l],a.push(f);return e.each(n,function(e,t){u.data[t]=e.name,u.data[t+"Color"]=e.titleColor}),s.stimuli.push({inherit:"instructions",media:t.endMedia||{html:'<div><p style="font-size:1.4em"><color="#FFFAFA">You have completed this task<br/><br/>Thank you very much for your participation.<br/><br/> Press "space" in order to continue.</p></div>'}}),a.push(s),a}var s={data:{block:"last"},input:[{handle:"space",on:"space"}],interactions:[{conditions:[{type:"begin"}],actions:[{type:"showStim",handle:"All"}]},{conditions:[{type:"inputEquals",value:"space"}],actions:[{type:"endTrial"}]}],stimuli:[]},o=[];return function(t,n){if(!arguments.length)return u();o[t]=n}});