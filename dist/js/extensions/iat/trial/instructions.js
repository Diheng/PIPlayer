define(["underscore","../data/properties","../data/categories","./IATlayout"],function(e,t,n,r){function i(){var e={data:{block:"generic"},input:[{handle:"space",on:"space"}],interactions:[{conditions:[{type:"begin"}],actions:[{type:"showStim",handle:"All"}]},{conditions:[{type:"inputEquals",value:"space"}],actions:[{type:"hideStim",handle:"All"},{type:"setInput",input:{handle:"endTrial",on:"timeout",duration:t.post_instructions_interval||0}}]},{conditions:[{type:"inputEquals",value:"endTrial"}],actions:[{type:"endTrial"}]},{conditions:[{type:"inputEquals",value:"skip1"}],actions:[{type:"setInput",input:{handle:"skip2",on:"enter"}}]},{conditions:[{type:"inputEquals",value:"skip2"}],actions:[{type:"goto",destination:"nextWhere",properties:{blockStart:!0}},{type:"endTrial"}]}]};return t.DEBUG&&e.input.push({handle:"skip1",on:"keypressed",key:27}),t.notouch||e.input.push({handle:"space",on:"bottomTouch",touch:!0}),e}function o(){var t=i(),o=[t],u,a,f,l=function(){this.layout=r(this.data.part)};for(var c=1;c<=7;c++)f=s[c]||{},u={data:{block:c},inherit:{set:"instructions",type:"byData",data:{block:"generic"}},customize:l},a={inherit:"instructions",media:{template:"inst"+c+".jst"}},f.media&&(a.media=f.media),f.template&&(a.media={inlineTemplate:f.template}),f.css&&(a.css=f.css),f.extend&&e.extend(u,f.extend),u.stimuli=[a],o.push(u);return e.each(n,function(e,n){t.data[n]=e.name,t.data[n+"Color"]=e.titleColor}),o}var s=[];return function(t,n){if(!arguments.length)return o();s[t]=n}});