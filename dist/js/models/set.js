define(["backbone","underscore"],function(e,t){var n=e.Collection.extend({orderList:[],nextPick:0,whereData:function(e){return t.isEmpty(e)?[]:this.filter(function(t){var n=t.get("data")||{};for(var r in e)if(e[r]!==n[r])return!1;return!0})},random:function(){return this.at(Math.floor(Math.random()*this.length)).attributes},exRandom:function(){return this.orderList=this.orderList.length?this.orderList:t.shuffle(t.range(this.length)),this.at(this.orderList.pop()).attributes},bySequence:function(){return this.nextPick<this.length||(this.nextPick=0),this.at(this.nextPick++).attributes},byData:function(e){if(t.isUndefined(e.data))throw console.log(e),new Error("A data property must by defined for byData");var n=t.isString(e.data)?{handle:e.data}:e.data,r=this.whereData(n)[0];if(!r)throw new Error("Inherit by Data failed. Data not found: "+e.data);return r.attributes},inherit:function(e){if(t.isFunction(e.type))return e.type.call(this,e);switch(e.type){case"bySequence":return this.bySequence();case"byData":return this.byData(e);case"exRandom":return this.exRandom();case"random":default:return this.random()}}});return n});