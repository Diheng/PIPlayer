define(["jquery","./listener","../is_touch","../now"],function(e,t,n,r){var i=[],s=0;return{getLatency:function(){return r()-s},resetTimer:function(){s=r()},add:function(r){if(!r)throw new Error("Missing input element. Could not add input listener");var s=this,o=e.isArray(r)?r:[r];e.each(o,function(e,r){if(typeof r.touch!="undefined"){if(n&&!r.touch)return!0;if(!n&&r.touch)return!0}var o=new t(r,s);i.push(o)})},remove:function(t){t=e.isArray(t)?t:[t];for(var n=i.length-1;n>=0;n--){var r=i[n];e.inArray(r.handle,t)!=-1&&(r.off(),i.splice(n,1))}},destroy:function(){for(var e in i)i[e].destroy();i=[]}}});