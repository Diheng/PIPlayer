<!DOCTYPE html>

<html>
<head>
  <title>interactions.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="inheritance.html">
                inheritance.js
              </a>
            
              
              <a class="source" href="input.html">
                input.js
              </a>
            
              
              <a class="source" href="interactions.html">
                interactions.js
              </a>
            
              
              <a class="source" href="sequence.html">
                sequence.js
              </a>
            
              
              <a class="source" href="settings.html">
                settings.js
              </a>
            
              
              <a class="source" href="stimulus.html">
                stimulus.js
              </a>
            
              
              <a class="source" href="touch.html">
                touch.js
              </a>
            
              
              <a class="source" href="trial.html">
                trial.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>interactions.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h3>Interactions</h3>
<p>The <code>interactions</code> module of the PIP is composed of pairs of propositions and actions.
Each interaction object has both a propositions and an actions property. </br></p>
<pre><code>   {
       propositions: [proposition1, proposition2],
       actions: [action1, action2]
   }</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>require([<span class="string">'app/API'</span>], <span class="keyword">function</span>(API) {</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h3>Propositions</h3>
<p><code>propositions</code> are sets of conditions that can be either true or false.
Each time there is an event (any input or the begining of a trial) all the propositions are evaluated.
In case all the propositions of an interaction are true, we execute all the <code>actions</code> associated with it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	API.addSequence([</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap for-h5">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h5>begin</h5>
<p>begin is a special proposition that gets automaticaly fired at the begining of each trial.
Use it to dispaly stimuli, and setup any time based action in your task.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		{</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>&nbsp;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			input: [
				{handle:<span class="string">'end'</span>,on:<span class="string">'space'</span>}
			],
			stimuli: [{data:{handle:<span class="string">'myStim'</span>},media :{word:<span class="string">'[begin]: Click space to move on'</span>}}],
			interactions: [</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>This first interaction displays the stimulus</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				{
					propositions: [
						{</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Set the proposition type</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							type:<span class="string">'begin'</span>
						}
					],
					actions: [{type:<span class="string">'showStim'</span>,handle:<span class="string">'myStim'</span>}]
				},</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>The second interaction is responsible for moving on (more about this in the inputEquals section)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				{
					propositions: [{type:<span class="string">'inputEquals'</span>,value:<span class="string">'end'</span>}],
					actions: [{type:<span class="string">'endTrial'</span>}]
				}
			]
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap for-h5">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h5>inputEquals</h5>
<p>Check if the triggering input handle is a static value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		{</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>We set i as the right key, and e as the left key</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			input: [
				{handle:<span class="string">'right'</span>,on:<span class="string">'keypressed'</span>, key:<span class="string">'i'</span>},
				{handle:<span class="string">'left'</span>,on:<span class="string">'keypressed'</span>, key:<span class="string">'e'</span>}
			],
			layout: [{media :{word:<span class="string">'[inputEquals]: Click e to move on'</span>}}],
			interactions: [
				{
					propositions: [
						{</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Set the proposition type</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							type:<span class="string">'inputEquals'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>This action will only be activated if the input handle is &#39;left&#39; </br>
Pro tip: You can pass an array to the <code>value</code> property instead of just a handle name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							value:<span class="string">'left'</span>
						}
					],
					actions: [{type:<span class="string">'endTrial'</span>}]
				}
			]
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap for-h5">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <h5>trialEquals</h5>
<p>Each trial has an optional data property that holds an array of user defined values.
The <code>trialEquals</code> proposition compares the input handle with the contents of the &quot;value&quot; property of the current trials data property.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		{</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>We set the leftOrRight property of trial data to &#39;right&#39;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			data: {leftOrRight: <span class="string">'right'</span>},
			input: [
				{handle:<span class="string">'right'</span>,on:<span class="string">'keypressed'</span>, key:<span class="string">'i'</span>},
				{handle:<span class="string">'left'</span>,on:<span class="string">'keypressed'</span>, key:<span class="string">'e'</span>}
			],
			layout: [{media :{word:<span class="string">'[trialEquals]: Click i to move on'</span>}}],
			interactions: [
				{
					propositions: [
						{</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Set the proposition type</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							type:<span class="string">'trialEquals'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>This action will only be activated if the input handle is equal to the leftOrRight property of the trial data.
in this case it will only be activated if the input handle is equal to &#39;right&#39;.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							value:<span class="string">'leftOrRight'</span>
						}
					],
					actions: [{type:<span class="string">'endTrial'</span>}]
				}
			]
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap for-h5">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <h5>stimEquals</h5>
<p>Each stimulus has an optional data property that holds an array of user defined values.
The <code>stimEquals</code> proposition compares the input handle with the contents of the &quot;value&quot; property of the current stimulus data property.
Note that only stimuli in the stimuli property are checked, stimuli under layout are ignored!!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		{</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>&nbsp;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			input: [
				{handle:<span class="string">'right'</span>,on:<span class="string">'keypressed'</span>, key:<span class="string">'i'</span>},
				{handle:<span class="string">'left'</span>,on:<span class="string">'keypressed'</span>, key:<span class="string">'e'</span>}
			],
			stimuli: [{data:{handle:<span class="string">'myStim'</span> ,leftOrRight:<span class="string">'left'</span>}, media :{word:<span class="string">'[stimEquals]: Click e to move on'</span>}}],
			interactions: [</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Just display the stimulus</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				{
					propositions: [{type:<span class="string">'begin'</span>}],
					actions: [{type:<span class="string">'showStim'</span>,handle:<span class="string">'myStim'</span>}]
				},</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>End trial when the correct key is pressed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				{
					propositions: [
						{</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Set the proposition type</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							type:<span class="string">'stimEquals'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>This action will only be activated if the input handle is equal to the leftOrRight property of the stimulus data.
In this case it will only be activated if the input handle is equal to &#39;right&#39;.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							value:<span class="string">'leftOrRight'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>The handle tells the player to search for the triggering property only in stimuli with the &#39;myStim&#39; handle.
(You can ommit the handle property and the proposition activates if any of the stimuli fit the stimEquals criteria)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							handle:<span class="string">'myStim'</span>
						}
					],
					actions: [{type:<span class="string">'endTrial'</span>}]
				}
			]
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap for-h5">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <h5>Negate</h5>
<p>Sometimes we want a proposition to be true only if a certain condition does NOT happen.
In these cases we can use the negate property to reverse a proposition.
(when using negate you should be carefull that the proposition doesn&#39;t turn out true in unexpected situations, for instance - on the begin input, or when triggering various timeouts)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		{
			data: {leftOrRight: <span class="string">'right'</span>},
			input: [
				{handle:<span class="string">'right'</span>,on:<span class="string">'keypressed'</span>, key:<span class="string">'i'</span>},
				{handle:<span class="string">'left'</span>,on:<span class="string">'keypressed'</span>, key:<span class="string">'e'</span>}
			],
			layout: [{media :{word:<span class="string">'[trialEquals+negate]: Click e to move on'</span>}}],
			interactions: [
				{
					propositions: [</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>If input does not equal to the leftOrRight property</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						{
							type:<span class="string">'trialEquals'</span>,
							value:<span class="string">'leftOrRight'</span>,
							negate: <span class="literal">true</span>
						},</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>And does not equal to the begin either.
(Without this part of the proposition the endTrial action would be fired upon the begin of the trial - which isn&#39;t a right keypress)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						{
							type:<span class="string">'trialEquals'</span>,
							value:<span class="string">'begin'</span>,
							negate:<span class="literal">true</span>
						}
					],
					actions: [{type:<span class="string">'endTrial'</span>}]
				}
			]
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <h3>Actions</h3>
<p>Each time there is an event (any input or the begining of a trial) all the propositions are evaluated.
In case all the propositions of an interaction are true, we execute all the <code>actions</code> associated with it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		,</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap for-h5">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <h5>Stimulus actions</h5>
<p>This trial allows showing and hiding stimuli using keyboard input.
It also saves the status of the stimuli into the displayed property of the stimulus data object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		{
			<span class="comment">/* This trial marker is used in the goto trial later*/</span>
			data: {actionStart:<span class="literal">true</span>},
			input: [
				{handle:<span class="string">'show'</span>,on:<span class="string">'enter'</span>},
				{handle:<span class="string">'hide'</span>,on:<span class="string">'space'</span>},
				{handle:<span class="string">'end'</span>,on:<span class="string">'esc'</span>}
			],
			layout: [{location:{top:<span class="number">0</span>}, media :{word:<span class="string">'[showStim, hideStim, endTrial]: Click escape to move on, enter to show stimulus, space to hide it'</span>}}],
			stimuli: [{data:{handle:<span class="string">'myStim'</span>, displayed:<span class="literal">false</span>},media :{word:<span class="string">'MyStim'</span>}}],
			interactions: [</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p><em>Display the stimulus</em></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				{
					propositions: [{type:<span class="string">'inputEquals'</span>, value:<span class="string">'show'</span>}],
					actions: [</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p><code>type:&#39;showStim&#39;</code> displays a stimulus. <code>handle</code> defines which stimuli should be affected</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						{
							type:<span class="string">'showStim'</span>,
							handle:<span class="string">'myStim'</span>
						},</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p><code>typ:&#39;setStimAttr&#39;</code> logs data into the stimulus data object. </br>
<code>handle</code> defines which stimuli should be affected. </br>
<code>setter</code> is an object to merge with the current stimulus data, overinging any clashing properties.</br>
In this case <code>type:&#39;setStimAttr&#39;</code> marks displayed as true.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						{
							type:<span class="string">'setStimAttr'</span>,
							handle:<span class="string">'myStim'</span>,
							setter:{displayed:<span class="literal">true</span>}
						}
					]
				},</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p><em>Hide the stimulus</em></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				{
					propositions: [{type:<span class="string">'inputEquals'</span>, value:<span class="string">'hide'</span>}],
					actions: [</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p><code>type:&#39;hideStim&#39;</code> displays a stimulus. <code>handle</code> defines which stimuli should be affected</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						{
							type:<span class="string">'hideStim'</span>,
							handle:<span class="string">'myStim'</span>
						},</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>In this case <code>type:&#39;setStimAttr&#39;</code> marks displayed as false.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						{
							type:<span class="string">'setStimAttr'</span>,
							handle:<span class="string">'myStim'</span>,
							setter:{displayed:<span class="literal">false</span>}
						}

					]
				},</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p><em>End the trial</em></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				{
					propositions: [{type:<span class="string">'inputEquals'</span>, value:<span class="string">'end'</span>}],
					actions: [</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p><code>type:&#39;endTrial&#39;</code> ends a trial and moves us on.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						{
							type:<span class="string">'endTrial'</span>
						}
					]
				}
			]
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap for-h5">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <h5>Trial Actions</h5>
<p>This trial ends when space is clicked or 5 seconds have passed. </br>
You should note in particular the <code>type:&#39;log&#39;</code> action that is the way we tell the player to save the interaction and later send it to the server.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		{

			input: [
				{handle:<span class="string">'end'</span>,on:<span class="string">'space'</span>}
			],
			layout: [{media :{word:<span class="string">'[Trial actions]: Click space to move on or wait 5 seconds'</span>}}],
			interactions: [</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p><em>Activate timeout at the begining</em> </br></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				{
					propositions: [{type:<span class="string">'begin'</span>}],
					actions: [</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p><code>type:&#39;setInput&#39;</code> creates a new input for this trial. <code>input</code> is a regular input object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						{
							type:<span class="string">'setInput'</span>,
							input:{handle:<span class="string">'time'</span>,on:<span class="string">'timeout'</span>,duration:<span class="number">5000</span>}
						}
					]
				},</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p><em>End trial on timeout</em></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				{
					propositions: [{type:<span class="string">'inputEquals'</span>, value:<span class="string">'time'</span>}],
					actions: [
						{
							type:<span class="string">'endTrial'</span>
						},</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>The <code>type:&#39;log&#39;</code> action tells the player to log this interaction.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						{
							type:<span class="string">'log'</span>
						}
					]
				},</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p><em>End trial on click</em></br>
On space click, remove listerner for the timeout, mark this trial as manualy terminated, log it and end trial.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				{
					propositions: [{type:<span class="string">'inputEquals'</span>,value:<span class="string">'end'</span>}],
					actions: [</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p><code>type:&#39;removeInput&#39;</code> removes all inputs that have the <code>inputHandle</code> handles.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						{
							type:<span class="string">'removeInput'</span>,
							inputHandle:<span class="string">'time'</span>
						},</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p><code>type: &#39;setTrialAttr&#39;</code> merges the values from <code>setter</code> into the trial data.
(setter may also take a function, see documentation)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						{
							type: <span class="string">'setTrialAttr'</span>,
							setter: {terminatedManual:<span class="literal">true</span>}
						},
						{
							type:<span class="string">'log'</span>
						},
						{
							type:<span class="string">'endTrial'</span>
						}
					]
				}
			]
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap for-h5">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <h5>goto</h5>
<p>The <code>type:&#39;goto&#39;</code> action is responsible for the next trial we move on to. It is special in that it executes only after the trial ends, so you will usualy want to follow it with an endTrial action.
There are many types of goto destinations, refer to the documentation for a full list.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		{

			input: [
				{handle:<span class="string">'restart'</span>,on:<span class="string">'space'</span>},
				{handle:<span class="string">'end'</span>,on:<span class="string">'esc'</span>}
			],
			layout: [{media :{word:<span class="string">'[goto]: Click space to restart actions, escape to end task'</span>}}],
			interactions: [
				{
					propositions: [{type:<span class="string">'inputEquals'</span>,value:<span class="string">'restart'</span>}],
					actions: [</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p><code>destination</code> defines what type of goto this is, in this case go to the last trial that has all the properties in <code>properties</code>. </br>
<code>properties</code> is an object to compare to the trial data. note that the properties will only compare to properties present in the raw sequence (before inheritance)! </br>
In this case <code>previousWhere</code> finds the first action trial which is marked by the data object {actionStart : true}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						{
							type:<span class="string">'goto'</span>,
							destination:<span class="string">'previousWhere'</span>,
							properties: {actionStart:<span class="literal">true</span>}
						},
						{
							type:<span class="string">'endTrial'</span>
						}
					]
				},
				{
					propositions: [{type:<span class="string">'inputEquals'</span>,value:<span class="string">'end'</span>}],
					actions: [
						{
							type:<span class="string">'endTrial'</span>
						}
					]
				}
			]
		}
	]);
});</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
