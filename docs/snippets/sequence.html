<!DOCTYPE html>

<html>
<head>
  <title>sequence.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="inheritance.html">
                inheritance.js
              </a>
            
              
              <a class="source" href="input.html">
                input.js
              </a>
            
              
              <a class="source" href="interactions.html">
                interactions.js
              </a>
            
              
              <a class="source" href="sequence.html">
                sequence.js
              </a>
            
              
              <a class="source" href="settings.html">
                settings.js
              </a>
            
              
              <a class="source" href="stimulus.html">
                stimulus.js
              </a>
            
              
              <a class="source" href="touch.html">
                touch.js
              </a>
            
              
              <a class="source" href="trial.html">
                trial.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>sequence.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>define([<span class="hljs-string">'app/API'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(API)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h3 id="the-trial-sequence">The trial sequence</h3>
<p>The heart of any PIP script is the sequence.
In this part of the tutorial we will see some advanced uses of the sequencer. </br></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
	API.addSequence([</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h4 id="multiple-trials">Multiple trials</h4>
<p>The sequence is an array of trials. you can sequentialy add in as many trials as you want</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		{</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>First trial</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			input: [{handle:<span class="hljs-string">'space'</span>,on:<span class="hljs-string">'space'</span>}],
			layout: [{media :{word:<span class="hljs-string">'First trial'</span>}}],
			interactions: [{propositions: [{type:<span class="hljs-string">'inputEquals'</span>,value:<span class="hljs-string">'space'</span>}],actions: [{type:<span class="hljs-string">'endTrial'</span>}]}]
		},
		{</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Second trial</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			input: [{handle:<span class="hljs-string">'space'</span>,on:<span class="hljs-string">'space'</span>}],
			layout: [{media :{word:<span class="hljs-string">'Second trial'</span>}}],
			interactions: [{propositions: [{type:<span class="hljs-string">'inputEquals'</span>,value:<span class="hljs-string">'space'</span>}],actions: [{type:<span class="hljs-string">'endTrial'</span>}]}]
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h4 id="mixer-objects">Mixer objects</h4>
<p>In order to create more complex sequences you can use mixer objects. Mixer objects allow you to repeat and randomize trials. </br>
Each mixer object has a mixer property that defines what type of mixer it is, and a data property that holds a sequence array to be mixed. This means that the sequence may include any number of trials and/or mixer objects.</br></p>

            </div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <pre><code>   {
       mixer: <span class="hljs-string">'mixer-type'</span>,
       data: [task1, task2]
   }
</code></pre>
            </div>
            
            <div class="content"><div class='highlight'><pre>		,</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h5 id="random">Random</h5>

            </div>
            
            <div class="content"><div class='highlight'><pre>		{</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>The mixer property tells the sequence what sort of mixer object this is.
This mixer randomizes its sequence.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			mixer : <span class="hljs-string">'random'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>The data property holds a sequence array to be randomized. These trials will be inserted into the sequence in a random order.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			data : [
				{
					input: [{handle:<span class="hljs-string">'space'</span>,on:<span class="hljs-string">'space'</span>}],
					layout: [{media :{word:<span class="hljs-string">'Random 1'</span>}}],
					interactions: [{propositions: [{type:<span class="hljs-string">'inputEquals'</span>,value:<span class="hljs-string">'space'</span>}],actions: [{type:<span class="hljs-string">'endTrial'</span>}]}]
				},
				{
					input: [{handle:<span class="hljs-string">'space'</span>,on:<span class="hljs-string">'space'</span>}],
					layout: [{media :{word:<span class="hljs-string">'Random 2'</span>}}],
					interactions: [{propositions: [{type:<span class="hljs-string">'inputEquals'</span>,value:<span class="hljs-string">'space'</span>}],actions: [{type:<span class="hljs-string">'endTrial'</span>}]}]
				},
				{
					input: [{handle:<span class="hljs-string">'space'</span>,on:<span class="hljs-string">'space'</span>}],
					layout: [{media :{word:<span class="hljs-string">'Random 3'</span>}}],
					interactions: [{propositions: [{type:<span class="hljs-string">'inputEquals'</span>,value:<span class="hljs-string">'space'</span>}],actions: [{type:<span class="hljs-string">'endTrial'</span>}]}]
				}
			]
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <h5 id="repeat">Repeat</h5>

            </div>
            
            <div class="content"><div class='highlight'><pre>		{</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>This mixer repeats the trials in the data property.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			mixer : <span class="hljs-string">'repeat'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>The repeat mixer requires the times property that defines how many times to repeat the trials.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			times : <span class="hljs-number">3</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>The data property holds a sequence array to be repeated.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			data : [
				{
					input: [{handle:<span class="hljs-string">'space'</span>,on:<span class="hljs-string">'space'</span>}],
					layout: [{media :{word:<span class="hljs-string">'I am repeated !!'</span>}}],
					interactions: [{propositions: [{type:<span class="hljs-string">'inputEquals'</span>,value:<span class="hljs-string">'space'</span>}],actions: [{type:<span class="hljs-string">'endTrial'</span>}]}]
				}
			]
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <h5 id="choose">Choose</h5>

            </div>
            
            <div class="content"><div class='highlight'><pre>		{</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>This mixer randomly chooses one or more trials</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			mixer : <span class="hljs-string">'chose'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>The number of trials to choose (by default only one)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			n : <span class="hljs-number">1</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>The data property holds a sequence array from which the mixer picks trials.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			data : [
				{
					input: [{handle:<span class="hljs-string">'space'</span>,on:<span class="hljs-string">'space'</span>}],
					layout: [{media :{word:<span class="hljs-string">'Choose only one (1)'</span>}}],
					interactions: [{propositions: [{type:<span class="hljs-string">'inputEquals'</span>,value:<span class="hljs-string">'space'</span>}],actions: [{type:<span class="hljs-string">'endTrial'</span>}]}]
				},
				{
					input: [{handle:<span class="hljs-string">'space'</span>,on:<span class="hljs-string">'space'</span>}],
					layout: [{media :{word:<span class="hljs-string">'Choose only one (2)'</span>}}],
					interactions: [{propositions: [{type:<span class="hljs-string">'inputEquals'</span>,value:<span class="hljs-string">'space'</span>}],actions: [{type:<span class="hljs-string">'endTrial'</span>}]}]
				},
				{
					input: [{handle:<span class="hljs-string">'space'</span>,on:<span class="hljs-string">'space'</span>}],
					layout: [{media :{word:<span class="hljs-string">'Choose only one (3)'</span>}}],
					interactions: [{propositions: [{type:<span class="hljs-string">'inputEquals'</span>,value:<span class="hljs-string">'space'</span>}],actions: [{type:<span class="hljs-string">'endTrial'</span>}]}]
				}

			]
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <h5 id="complex-randomization-wrapper-">Complex Randomization (wrapper)</h5>

            </div>
            
            <div class="content"><div class='highlight'><pre>		{</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>This mixer randomizes its sequence</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			mixer : <span class="hljs-string">'random'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>The data property holds a sequence array to be randomized.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			data : [</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>This trial is randomized normaly</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				{
					input: [{handle:<span class="hljs-string">'space'</span>,on:<span class="hljs-string">'space'</span>}],
					layout: [{media :{word:<span class="hljs-string">'Complex - may be before or after the pair'</span>}}],
					interactions: [{propositions: [{type:<span class="hljs-string">'inputEquals'</span>,value:<span class="hljs-string">'space'</span>}],actions: [{type:<span class="hljs-string">'endTrial'</span>}]}]
				},</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>The wrapper mixer tells the sequencer to keep the data inside it together despite the randomization. It is analogous to parathesis in math. </br>
In contrast, if we has a repeat mixer here, its content would be randomized.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				{
					mixer: <span class="hljs-string">'wrapper'</span>,
					data: [
						{
							input: [{handle:<span class="hljs-string">'space'</span>,on:<span class="hljs-string">'space'</span>}],
							layout: [{media :{word:<span class="hljs-string">'Pair 1'</span>}}],
							interactions: [{propositions: [{type:<span class="hljs-string">'inputEquals'</span>,value:<span class="hljs-string">'space'</span>}],actions: [{type:<span class="hljs-string">'endTrial'</span>}]}]
						},
						{
							input: [{handle:<span class="hljs-string">'space'</span>,on:<span class="hljs-string">'space'</span>}],
							layout: [{media :{word:<span class="hljs-string">'Pair 2'</span>}}],
							interactions: [{propositions: [{type:<span class="hljs-string">'inputEquals'</span>,value:<span class="hljs-string">'space'</span>}],actions: [{type:<span class="hljs-string">'endTrial'</span>}]}]
						}
					]
				}
			]
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <h5 id="the-end">The End</h5>

            </div>
            
            <div class="content"><div class='highlight'><pre>		{
			input: [{handle:<span class="hljs-string">'space'</span>,on:<span class="hljs-string">'space'</span>}],
			layout: [{media :{word:<span class="hljs-string">'The End'</span>}}],
			interactions: [{propositions: [{type:<span class="hljs-string">'inputEquals'</span>,value:<span class="hljs-string">'space'</span>}],actions: [{type:<span class="hljs-string">'endTrial'</span>}]}]
		}
	]);
	<span class="hljs-comment">/* this is where we close the sequence */</span>

	API.play();</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <h3 id="pro-tip">Pro tip</h3>
<p><em>This section goes beyond the normal scope of the PIP, and is intended for use by advanced users only.</em> </br>
The sequencer allows for many complex configurations. There are times that you want a quick easy way to test that the sequence you created realy does what it is supposed to.
The proper way to do that is to create a mock sequence and check that it is mixed correcty. </br>
Following is such an example. </br></p>

            </div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Require the mixer function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-built_in">require</span>([<span class="hljs-string">'utils/mixer'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(mixer)</span> {</span>
		<span class="hljs-keyword">var</span> sequence;</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>create a sequence using numbers (or strings) instead of trials.
you may use all the regular mixer objects.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		sequence = [
			{
				mixer : <span class="hljs-string">'repeat'</span>,
				times : <span class="hljs-number">4</span>,
				data : [
					{
						mixer: <span class="hljs-string">'random'</span>,
						data: [
							{
								mixer : <span class="hljs-string">'repeat'</span>,
								times : <span class="hljs-number">4</span>,
								data : [
									{
										mixer: <span class="hljs-string">'random'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Note that we use numbers instead of trials here. This allows us to follow the order that this mixer follows.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>										data: [
											<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>
										] <span class="hljs-comment">/* end random data */</span>
									}
								] <span class="hljs-comment">/* end repeat data */</span>
							}
						] <span class="hljs-comment">/* end random data */</span>
					}
				] <span class="hljs-comment">/* end repeat data */</span>
			}
		];</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>We log the results of the mixer into the console (click F12 to Open Developer Tools - in Firefox requires Firebug extension.) </br>
Now you can check to see if the order is what you intend.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		console.log(mixer(sequence));
	});


});
<span class="hljs-comment">/* don't forget to close the define wrapper */</span></pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
